<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Veo Video Generator</title>
  <style>
    body { background:#0f172a; color:white; font-family:sans-serif; padding:20px; }
    input, select, textarea, button { width:100%; padding:8px; margin:6px 0; border-radius:8px; }
    button { background:#10b981; color:white; font-weight:bold; border:none; cursor:pointer; }
    button:disabled { background:#6b7280; cursor:not-allowed; }
  </style>
</head>
<body>
  <h2>Gemini / Veo Video Generator</h2>

  <label>API Key</label>
  <input type="password" id="apiKey" placeholder="Paste Gemini API key here" />
  <button onclick="validateKey()">Validate</button>
  <p id="keyStatus"></p>

  <label>Model</label>
  <select id="model">
    <option value="veo-3-generate-preview">veo-3-generate-preview</option>
    <option value="veo-3-fast-generate-preview">veo-3-fast-generate-preview</option>
    <option value="veo-2-generate-stable">veo-2-generate-stable</option>
  </select>

  <label>Aspect Ratio</label>
  <select id="aspectRatio">
    <option value="16:9">16:9</option>
    <option value="9:16">9:16</option>
    <option value="1:1">1:1</option>
  </select>

  <label>Person Generation</label>
  <select id="person">
    <option value="allow_all">Allow all</option>
    <option value="allow_adult">Allow adult</option>
    <option value="not_allow">Not allow</option>
  </select>

  <label>Resolution</label>
  <select id="resolution">
    <option value="720p">720p HD</option>
    <option value="1080p">1080p FHD</option>
  </select>

  <label>Negative Prompt</label>
  <input type="text" id="negativePrompt" placeholder="cartoon, text, watermark" />

  <label>Video Prompt</label>
  <textarea id="prompt" placeholder="Describe your video..."></textarea>

  <button id="generateBtn" onclick="generateVideo()">Generate Video</button>
  <p id="result"></p>

  <script>
    async function validateKey() {
      const key = document.getElementById("apiKey").value;
      if (!key) { alert("Enter API key"); return; }
      document.getElementById("keyStatus").innerText = "✅ Key entered (not checked server-side)";
    }

    async function generateVideo() {
      const btn = document.getElementById("generateBtn");
      btn.disabled = true;
      btn.innerText = "Generating...";

      const body = {
        apiKey: document.getElementById("apiKey").value,
        model: document.getElementById("model").value,
        aspectRatio: document.getElementById("aspectRatio").value,
        person: document.getElementById("person").value,
        resolution: document.getElementById("resolution").value,
        prompt: document.getElementById("prompt").value,
        negativePrompt: document.getElementById("negativePrompt").value
      };

      try {
        const res = await fetch("/api/generate-video", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(body)
        });
        const data = await res.json();
        document.getElementById("result").innerText = JSON.stringify(data, null, 2);
      } catch (err) {
        document.getElementById("result").innerText = "❌ Error: " + err.message;
      } finally {
        btn.disabled = false;
        btn.innerText = "Generate Video";
      }
    }
  </script>
</body>
</html>
